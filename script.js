const creatures = {
  "Glink's": {
    vida: 50,
    sanidade: 30,
    especial: 20,
    armadura: 1,
    vidaPorNivel: 10,
    sanidadePorNivel: 3,
    especialPorNivel: 1,
    armaduraPorNivel: 3,
    bru: 14, agi: 16, det: 12, pre: 13, lib: 8, cnx: 9,
    bruDano: 1, agiDano: 2, detDano: 1, preDano: 1, libDano: 0, cnxDano: 0,
    bruTest: 2, agiTest: 3, detTest: 1, preTest: 1, libTest: -2, cnxTest: -1,
    bonus:`Resistente:Ácido
    Vulnerável: Aura`,
    bonus2: `Ataque com calda - teste de Brutalidade: Quando ataca causa 2d8 de dano esmagante.
Ataque com garras - teste de Agilidade: Ao acertar causa 3d6 de dano cortante.
Ataque com arma coletada: sua arma supersticiosa causa dano ácido extra de 2d4, e pode envenenar.
`,
    bonus3:`Os Protetores da floresta
Elemento - Caos`,
    Magias: `Nível 5 - Cuspe ácido, nível 7 - Fogo vivo.`,
    Passivas:` Nível 1 - Raiva.`,
    Talentos: `Foices, Espadas, Machados.`,
    Descricao:`Os Glink's são criaturas humanoides com características de lagartos, encontrados principalmente em florestas densas e selvagens. Possuem escamas que variam de tons esverdeados a marrons, facilitando a camuflagem em seu habitat natural. Suas feições mesclam traços humanos e reptilianos, com olhos penetrantes e pupilas fendidas que demonstram sua conexão primitiva e instintiva com o ambiente ao seu redor.
Embora sua origem seja desconhecida, os Glink's possuem uma ligação profunda com o elemento Caos. Esse vínculo é refletido tanto em suas ações quanto em sua natureza imprevisível. São criaturas extremamente territoriais, protegendo com fervor as áreas que consideram suas, utilizando armas como espadas, foices ou machados para amedrontar e afastar invasores. Seus territórios são sagrados para eles, e qualquer intruso é rapidamente eliminado ou expulso com brutalidade.
Apesar de sua conexão com a natureza, os Glink's não têm afeto pela ideia de proteger toda a floresta ou preservar o equilíbrio natural em uma escala maior. Eles veem a natureza fora de seus domínios como algo a ser corrompido ou destruído. Quando se aventuram fora de seus territórios, esses seres muitas vezes queimam, destroem e envenenam a terra e as plantas que encontram. Essa dualidade reflete sua essência caótica, onde a proteção e a destruição da natureza coexistem de maneira imprevisível.
Os Glink's desprezam sociedades evoluídas e a vida em grandes grupos. Vivem em pequenos bandos ou até mesmo sozinhos, preferindo a solidão ou o contato limitado com outros de sua espécie. Eles evitam qualquer forma de civilização avançada, considerando-a uma ameaça para suas formas primitivas de vida e para a floresta que habitam. Por essa razão, são frequentemente vistos como inimigos das civilizações humanas, druidas e outros protetores da natureza.
Seus comportamentos e motivações são muitas vezes incompreendidos, mas uma coisa é certa: os Glink's são forças imprevisíveis e perigosas da natureza, que devem ser tratados com extrema cautela.`,
    img: "imagens/Glink's.png"
  },"Musplum": {
    vida: 30,
    sanidade: 15,
    especial: 15,
    armadura: 1,
    vidaPorNivel: 8,
    sanidadePorNivel: 5,
    especialPorNivel: 2,
    armaduraPorNivel: 4,
    bru: 13, agi: 17, det: 12, pre: 9, lib: 9, cnx: 11,
    bruDano: 1, agiDano: 2, detDano: 1, preDano: 0, libDano: 0, cnxDano: 1,
    bruTest: 1, agiTest: 3, detTest: 1, preTest: -1, libTest: -1, cnxTest: 1,
    bonus:`Resistente:Escuridão
    Vulnerável: Gelo`,
    bonus2: `Ataque com bico - teste de Agilidade : Prioriza as pernas e causa 1d12 de dano perfurante.
Ataque com garras - teste de Brutalidade: Ao acertar causa 3d6 de dano cortante.
Olhar no escuro: pode enxergar no escuro.`,
bonus3:`Rastejadores obscuros
Elemento - Caos`,
    Magias: `Nível 3 - Força gélida , nível 10 - Tempestade da natureza.`,
    Passivas:` Nível 1 - Furtividade sombria.`,
    Talentos: `-`,
    Descricao:`O Musplum é uma criatura peculiar e misteriosa, com uma forma bípede coberta por penas e pelugem, que a faz parecer um híbrido entre uma ave e um mamífero. Embora possua orelhas grandes, semelhantes às de um rato, seu rosto e comportamento se assemelham mais ao de uma ave de rapina. O bico preto e curvado do Musplum é uma de suas principais características, usado para caçar e se alimentar de carcaças, reforçando sua natureza necrófaga.
Essas criaturas são rápidas e evasivas, preferindo habitar os ambientes mais sombrios e inóspitos, como florestas densas, cavernas profundas e os subterrâneos abandonados. Os Musplums são criaturas noturnas, sendo praticamente impossíveis de serem avistadas durante o dia. Eles evitam a luz e qualquer tipo de exposição, preferindo se manter escondidos até o anoitecer, quando se tornam mais ativos.
Quando jovens, os Musplums são minúsculos, medindo entre 3 cm e 10 cm de altura. Durante essa fase, podem facilmente se abrigar em pequenos buracos ou até dentro das casas das pessoas, onde passam despercebidos devido ao seu tamanho. No entanto, à medida que amadurecem, sofrem uma série de protometamorfoses que mudam drasticamente sua aparência. As penas começam a crescer em maior quantidade, seu bico aumenta consideravelmente e suas garras se tornam mais afiadas, transformando-os em predadores noturnos muito mais perigosos. Nessa fase adulta, a convivência próxima com humanos se torna inviável, pois seus instintos caçadores e sua agressividade se intensificam.
Os Musplums são conhecidos por serem extremamente furtivos e sorrateiros durante a noite, movendo-se com precisão quase sobrenatural. Embora prefiram evitar o confronto, quando forçados a se revelar, eles se tornam inimigos metódicos e agressivos. Ataques de Musplums são rápidos e inesperados, com movimentos calculados para atingir pontos vitais de suas presas. São criaturas territoriais e cautelosas, mas quando se sentem ameaçadas, sua natureza predatória se manifesta com força total.
Sua presença em florestas e cavernas torna esses locais ainda mais perigosos para aventureiros desavisados, e muitos caçadores de mitos afirmam que os Musplums são responsáveis por desaparecimentos misteriosos em regiões remotas. Essas criaturas sombrias e enigmáticas permanecem envoltas em lendas e superstições, sempre espreitando nas sombras, à espera do momento certo para atacar.`,
    img: "imagens/Musplum.png"
  },"Paralios": {
    vida: 110,
    sanidade: 70,
    especial: 25,
    armadura: 2,
    vidaPorNivel: 15,
    sanidadePorNivel: 8,
    especialPorNivel: 4,
    armaduraPorNivel: 2,
    bru: 12, agi: 14, det: 11, pre: 8, lib: 25, cnx: 28,
    bruDano: 0, agiDano: 1, detDano: 0, preDano: 0, libDano: 3, cnxDano: 4,
    bruTest: 1, agiTest: 2, detTest: 1, preTest: -2, libTest: 5, cnxTest: 6,
    bonus:`Imune a dano de:Morte
    Imune a dano de:Sono
    Resistente:Alma
    Vulnerável:Eclipe
    Vulnerável: Cinzas`,
    bonus2: `Alvos que acertarem diretamente o coração causam dano dobrado na rolagem. Ao ser ferido no coração, Paralios marca imediatamente o atacante como sua obsessão até o fim do combate. Enquanto estiver focado nesse inimigo, Paralios recebe +1d20 de dano de Sangue contra ele, além de priorizá-lo em suas ações.
Invocar Almas Sombrias: Paralios invoca 2 almas flutuantes que orbitam acima dele. Caso receba um golpe fatal, pode consumir as almas para curar 4d12. (Teste de Conexão para invocar - sem custo).
Intangibilidade Inesperada: Como reação por turno, torna-se intocável e esquiva automaticamente de um acerto.
Sussurros do Sono: Como ação livre, tenta colocar um inimigo em sono profundo (teste de Conexão vs Libertação).
Braço Etéreo Dourado: Um ataque com braço dourado fantasmagórico, causando 2d20 de dano Alma. Pode carregar o ataque usando a ação completa ou movimento para causar 4d20.
Névoa do Pesadelo: Passiva Ativável - Paralios ativa uma maldição no ambiente: ninguém no raio de 1000 km consegue dormir direito ou se recuperar, gerando insônia, medo e pesadelos contínuos.`,
bonus3:`O Anunciador dos Sonhos
Elemento - Desconhecido`,
    Magias: `Nível 1 - Sonho Frágil, Nível 3 - Sonhos Forçados, Nível 4 - Labirinto Mental, Nível 5 - Dimensão dos Sonhos`,
    Passivas:` Nível 1 - Teleporte repentino, Nível 4 - Furtividade Sombria.`,
    Talentos: `Furtividade - Requisito: Agilidade,
Intimidação - Requisito: Conexão,
Liderança -Requisito: Conexão.`,
    Descricao:`Uma entidade sombria e semi-transparente, de aparência esguia e perturbadora. Seu rosto é um contraste marcante: pele branca como porcelana rachada, envolta por manchas e traços negros que escorrem como tinta. No vazio de sua face, os olhos vermelhos brilham intensamente, parecendo atravessar a alma de quem ousa encará-lo.
Paralios não caminha — paira silenciosamente pelo ar, como se a gravidade não o alcançasse. Sua presença é sempre envolta por névoas escuras e sussurros indecifráveis, carregando consigo o frio da noite e o peso dos sonhos malditos.
Nas Terras de Calisto, Paralios é conhecido como o Anunciador dos Sonhos, o Arauto de Morpheus, o guardião dos pesadelos que anuncia a chegada da entidade maior. Onde Paralios passa, pragas de insônia surgem, e os pesadelos tomam forma, se arrastando para fora da mente dos aflitos.
Dizem que ele aparece sobre o peito de suas vítimas, imobilizando-as com a paralisia do sono, enquanto seus olhos vermelhos são a última coisa que os vivos veem antes de acordar sem alma… ou nunca mais acordar.`,
    img: "imagens/Paralios.png",
    img2: "imagens/Token-Paralios.png"
  }
};

const select = document.getElementById('creatureSelect');
const nameEl = document.getElementById('creatureName');
const imageEl = document.getElementById('creatureImage');

// Popula o menu de seleção
Object.keys(creatures).forEach(creature => {
  const option = document.createElement('option');
  option.value = creature;
  option.textContent = creature;
  select.appendChild(option);
});

// Quando um item for selecionado
select.addEventListener('change', () => {
  const selected = creatures[select.value];
  if (selected) {
    document.getElementById('creatureStats').style.display = 'block';
    nameEl.textContent = select.value;
    imageEl.src = selected.img;

    document.getElementById('bru').textContent = selected.bru;
    document.getElementById('agi').textContent = selected.agi;
    document.getElementById('det').textContent = selected.det;
    document.getElementById('pre').textContent = selected.pre;
    document.getElementById('lib').textContent = selected.lib;
    document.getElementById('cnx').textContent = selected.cnx;
    document.getElementById('bruDano').textContent = selected.bruDano;
    document.getElementById('agiDano').textContent = selected.agiDano;
    document.getElementById('detDano').textContent = selected.detDano;
    document.getElementById('preDano').textContent = selected.preDano;
    document.getElementById('libDano').textContent = selected.libDano;
    document.getElementById('cnxDano').textContent = selected.cnxDano;
    document.getElementById('bruTest').textContent = selected.bruTest;
    document.getElementById('agiTest').textContent = selected.agiTest;
    document.getElementById('detTest').textContent = selected.detTest;
    document.getElementById('preTest').textContent = selected.preTest;
    document.getElementById('libTest').textContent = selected.libTest;
    document.getElementById('cnxTest').textContent = selected.cnxTest;
    document.getElementById('bonus').textContent = selected.bonus;
    document.getElementById('bonus2').textContent = selected.bonus2;
    document.getElementById('Magias').textContent = selected.Magias;
    document.getElementById('Passivas').textContent = selected.Passivas;
    document.getElementById('Talentos').textContent = selected.Talentos;

    // Definindo o nível inicial
    document.getElementById('creatureLevel').textContent = 1; 
    updateStats(selected, 1); // Atualiza as estatísticas no início
  } else {
    document.getElementById('creatureStats').style.display = 'none';
  }
});

// Botão para aumentar o nível
document.getElementById('levelUpButton').addEventListener('click', () => {
  const levelElement = document.getElementById('creatureLevel');
  let level = parseInt(levelElement.textContent);
  const selected = creatures[select.value];

  if (selected) {
    level += 1; // Aumenta o nível
    levelElement.textContent = level;
    updateStats(selected, level); // Atualiza as estatísticas com o novo nível
  }
});

// Botão para diminuir o nível
document.getElementById('levelDownButton').addEventListener('click', () => {
  const levelElement = document.getElementById('creatureLevel');
  let level = parseInt(levelElement.textContent);
  const selected = creatures[select.value];

  if (selected && level > 1) { // Impede que o nível seja menor que 1
    level -= 1; // Diminui o nível
    levelElement.textContent = level;
    updateStats(selected, level); // Atualiza as estatísticas com o novo nível
  }
});

// Função para atualizar as estatísticas
function updateStats(creature, level) {
  const vida = creature.vida + (creature.vidaPorNivel * (level - 1)); // Vida base + (vida por nível * (nível atual - 1))
  const sanidade = creature.sanidade + (creature.sanidadePorNivel * (level - 1));
  const especial = creature.especial + (creature.especialPorNivel * (level - 1));
  const armadura = creature.armadura + Math.floor((level - 1) / creature.armaduraPorNivel);

  // Atualiza a interface com as novas estatísticas
  document.getElementById('vida').textContent = vida;
  document.getElementById('sanidade').textContent = sanidade;
  document.getElementById('especial').textContent = especial;
  document.getElementById('armadura').textContent = armadura;
}

function formatBonusText(text, type = "default") {
  let className;
  if (type === "bonus1") className = "bonus1-paragraph";
  else if (type === "bonus2") className = "bonus2-paragraph";
  else if (type === "bonus3") className = "bonus3-paragraph";
  else className = "bonus-paragraph";

  return text.split(/\n+/).map(sentence =>
    sentence.trim() ? `<p class="${className}">${sentence}</p>` : ''
  ).join('');
}

select.addEventListener('change', () => {
  const selected = creatures[select.value];
  if (selected) {
    document.getElementById('creatureStats').style.display = 'block';
    nameEl.textContent = select.value;
    imageEl.src = selected.img;

    document.getElementById('bonus').innerHTML = formatBonusText(selected.bonus, "bonus1"); // Estilo exclusivo
    document.getElementById('bonus2').innerHTML = formatBonusText(selected.bonus2, "bonus2");
    document.getElementById('bonus3').innerHTML = formatBonusText(selected.bonus3, "bonus3");

    // Outras configurações de stats...
 // Atualiza a descrição
 descricao.innerHTML = formatDescriptionText(selected.Descricao); // Preenche a descrição com base na criatura selecionada
} else {
  document.getElementById('creatureStats').style.display = 'none'; // Se não houver criatura, oculta as stats
}
});


// Preenche o conteúdo da descrição com base no objeto "creatures"




// Preenche o conteúdo da descrição com base no objeto "creatures"
// Usamos innerHTML para permitir a renderização de tags HTML como <br> para quebras de linha.




// Função para formatar o texto da descrição com parágrafos
function formatDescriptionText(text) {
  // Divide o texto com base nas quebras de linha
  return text.split(/\n+/).map(paragraph => 
    paragraph.trim() ? `<p>${paragraph}</p>` : ''  // Cria parágrafos para cada linha não vazia
  ).join(''); // Junta os parágrafos
}

 


// Preenche o conteúdo da descrição com base no objeto "creatures"
// Preenche a descrição ao carregar a página pela primeira vez
window.addEventListener('load', () => {
  const selected = creatures[select.value]; // Obtém a criatura selecionada inicialmente
  if (selected) {
    descricao.innerHTML = formatDescriptionText(selected.Descricao); // Preenche a descrição com a criatura inicial
  }
});

// Seleciona o botão e o conteúdo da seção de descrição
const toggleButton = document.querySelector('.toggle-button');
const toggleContent = document.querySelector('.toggle-content');

// Adiciona um evento de clique ao botão para alternar a visibilidade da descrição
toggleButton.addEventListener('click', () => {
  toggleContent.classList.toggle('show'); // Alterna a classe 'show' para mostrar ou esconder a descrição
});


select.addEventListener('change', () => {
  const selected = creatures[select.value];
  if (selected) {
      document.getElementById('creatureStats').style.display = 'block';
      document.getElementById('creatureName').textContent = select.value;

      const image1 = document.getElementById('creatureImage');
      const image2 = document.getElementById('creatureImage2');

      image1.src = selected.img;
      image2.src = selected.img2;

      let currentImage = 0;
      const images = [image1, image2];

      function showImage(index) {
          images.forEach((img, i) => {
              img.style.opacity = i === index ? "1" : "0";
          });
      }

      // Garante que a primeira imagem esteja visível ao trocar de criatura
      showImage(0);

      document.getElementById('prevImage').onclick = () => {
          currentImage = (currentImage === 0) ? 1 : 0;
          showImage(currentImage);
      };

      document.getElementById('nextImage').onclick = () => {
          currentImage = (currentImage === 0) ? 1 : 0;
          showImage(currentImage);
      };
  }
});

